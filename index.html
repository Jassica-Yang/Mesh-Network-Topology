<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Real-Time Uplink/Downlink Speed Graph</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body { font-family: sans-serif; padding: 2em; }
    canvas { max-width: 800px; }
  </style>
</head>
<body>
  <h2>Real-Time Uplink / Downlink Speed Graph</h2>
  <p style="font-size: 0.9em; color: gray;">
    Demo version: Simulated uplink/downlink speed, updates every 2 sec.
  </p>
  <canvas id="speedChart" width="800" height="400"></canvas>

  <script>
    const ctx = document.getElementById('speedChart').getContext('2d');
    const labels = [];
    const uplinkData = [];
    const downlinkData = [];

    const chart = new Chart(ctx, {
      type: 'line',
      data: {
        labels: labels,
        datasets: [
          {
            label: 'Uplink (Mbps)',
            data: uplinkData,
            borderColor: 'orange',
            tension: 0.3
          },
          {
            label: 'Downlink (Mbps)',
            data: downlinkData,
            borderColor: 'blue',
            tension: 0.3
          }
        ]
      },
      options: {
        animation: false,
        responsive: true,
        scales: {
          y: {
            beginAtZero: true,
            title: { display: true, text: 'Speed (Mbps)' }
          },
          x: {
            title: { display: true, text: 'Time' }
          }
        }
      }
    });

    function simulateSpeed() {
      const now = new Date().toLocaleTimeString();
      if (labels.length > 30) {
        labels.shift();
        uplinkData.shift();
        downlinkData.shift();
      }

      labels.push(now);
      uplinkData.push((Math.random() * 3).toFixed(2));    // 模擬 uplink 速度 0~3 Mbps
      downlinkData.push((Math.random() * 30 + 5).toFixed(2)); // 模擬 downlink 速度 5~35 Mbps

      chart.update();
    }

    // 每 3 秒更新一次
    setInterval(simulateSpeed, 3000);
  </script>
</body>
</html>
